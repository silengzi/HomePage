"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var o,r,a,s,n=[],h=!0,l=!1;try{if(a=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;h=!1}else for(;!(h=(o=a.call(i)).done)&&(n.push(o.value),n.length!==e);h=!0);}catch(t){l=!0,r=t}finally{try{if(!h&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw r}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,n=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){n=!0,a=t},f:function(){try{s||null==i.return||i.return()}finally{if(n)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach(function(t){_defineProperty(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function _defineProperty(t,e,i){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);var o=i.call(t,e||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}var GridAnimation=function(){return _createClass(function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),this.canvas=e,this.ctx=e.getContext("2d"),this.options=_objectSpread({direction:i.direction||"right",speed:i.speed||1,borderColor:i.borderColor||"rgba(255, 255, 255, 0.05)",squareSize:i.squareSize||40,hoverFillColor:i.hoverFillColor||"rgba(255, 255, 255, 0.6)",hoverShadowColor:i.hoverShadowColor||"rgba(255, 255, 255, 0.3)",transitionDuration:i.transitionDuration||200,trailDuration:i.trailDuration||1e3,specialBlockColor:i.specialBlockColor||"rgba(255, 100, 100, 0.8)",specialHoverColor:i.specialHoverColor||"rgba(100, 255, 100, 0.8)",snakeHeadColor:i.snakeHeadColor||"rgba(255, 255, 255, 0.9)",snakeTailColor:i.snakeTailColor||"rgba(100, 100, 255, 0.3)",snakeGradientStops:i.snakeGradientStops||5,snakeColorDecay:i.snakeColorDecay||.7},i),this.gridOffset={x:0,y:0},this.hoveredSquare=null,this.animationFrame=null,this.currentOpacity=0,this.targetOpacity=0,this.lastTimestamp=0,this.hoverRadius=3,this.trailSquares=new Map,this.specialBlock=null,this.specialBlockTimer=null,this.isSpecialBlockHovered=!1,this.snakeBody=[],this.shouldGrow=!1},[{key:"init",value:function(){var t=this;this.resizeCanvas(),this.setupEventListeners(),this.animate(),isPhone?setTimeout(function(){t.createSpecialBlock()},500):this.createSpecialBlock(),document.addEventListener(visibilityChangeEvent,this.handleVisibilityChange.bind(this))}},{key:"resizeCanvas",value:function(){var t=window.devicePixelRatio||1,e=this.canvas.offsetWidth,i=this.canvas.offsetHeight;this.canvas.width=Math.floor(e*t),this.canvas.height=Math.floor(i*t),this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(i,"px"),this.ctx.scale(t,t)}},{key:"setupEventListeners",value:function(){var e=this;window.addEventListener("resize",function(){return e.resizeCanvas()}),this.canvas.addEventListener("mousemove",function(t){return e.handleMouseMove(t)}),this.canvas.addEventListener("mouseleave",function(){return e.handleMouseLeave()}),isPhone&&void 0!==window.orientation&&window.addEventListener("orientationchange",function(){setTimeout(function(){e.resizeCanvas(),e.createSpecialBlock()},300)})}},{key:"handleMouseMove",value:function(t){var e,i,o=this.canvas.getBoundingClientRect(),r=t.clientX-o.left,a=t.clientY-o.top,s=Math.floor(this.gridOffset.x/this.options.squareSize)*this.options.squareSize,n=Math.floor(this.gridOffset.y/this.options.squareSize)*this.options.squareSize,h=Math.floor((r+this.gridOffset.x-s)/this.options.squareSize),l=Math.floor((a+this.gridOffset.y-n)/this.options.squareSize);(null===(e=this.hoveredSquare)||void 0===e?void 0:e.x)===h&&(null===(i=this.hoveredSquare)||void 0===i?void 0:i.y)===l||(this.hoveredSquare&&(this.snakeBody.unshift({x:this.hoveredSquare.x,y:this.hoveredSquare.y}),!this.shouldGrow&&0<this.snakeBody.length&&this.snakeBody.pop(),this.shouldGrow=!1),this.hoveredSquare={x:h,y:l},this.targetOpacity=.6,this.specialBlock&&h===this.specialBlock.x&&l===this.specialBlock.y&&(this.shouldGrow=!0,this.createSpecialBlock()))}},{key:"handleMouseLeave",value:function(){if(this.hoveredSquare){var t=Math.floor(this.gridOffset.x/this.options.squareSize)*this.options.squareSize,e=Math.floor(this.gridOffset.y/this.options.squareSize)*this.options.squareSize,i="".concat(this.hoveredSquare.x,",").concat(this.hoveredSquare.y);this.trailSquares.set(i,{x:this.hoveredSquare.x*this.options.squareSize+t,y:this.hoveredSquare.y*this.options.squareSize+e,opacity:.6})}this.hoveredSquare=null,this.targetOpacity=0}},{key:"createSpecialBlock",value:function(){this.specialBlockTimer&&clearTimeout(this.specialBlockTimer);for(var e,i,t=window.devicePixelRatio||1,o=Math.ceil(this.canvas.width/t/this.options.squareSize),r=Math.ceil(this.canvas.height/t/this.options.squareSize);e=1+Math.floor(Math.random()*(o-2)),i=1+Math.floor(Math.random()*(r-2)),this.snakeBody.some(function(t){return t.x===e&&t.y===i}););this.specialBlock={x:e,y:i,color:this.options.specialBlockColor,initialOffset:_objectSpread({},this.gridOffset)}}},{key:"drawGrid",value:function(){var b=this,t=window.devicePixelRatio||1;this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.setTransform(t,0,0,t,0,0);var w=Math.floor(this.gridOffset.x/this.options.squareSize)*this.options.squareSize,O=Math.floor(this.gridOffset.y/this.options.squareSize)*this.options.squareSize;this.ctx.lineWidth=isPhone?1:.5,isPhone&&this.ctx.translate(.5,.5),this.snakeBody.forEach(function(t,e){var i=Math.round(t.x*b.options.squareSize+w-b.gridOffset.x%b.options.squareSize),o=Math.round(t.y*b.options.squareSize+O-b.gridOffset.y%b.options.squareSize);if(b.ctx.shadowColor=b.options.hoverShadowColor,b.ctx.shadowBlur=15,b.ctx.shadowOffsetX=0,(b.ctx.shadowOffsetY=0)===e)b.ctx.fillStyle=b.options.snakeHeadColor;else{var r=Math.pow(b.options.snakeColorDecay,e),a=b.options.snakeHeadColor.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([.\d]+))?\)/),s=b.options.snakeTailColor.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([.\d]+))?\)/);if(a&&s){var n=parseInt(a[1]),h=parseInt(a[2]),l=parseInt(a[3]),c=a[4]?parseFloat(a[4]):1,u=parseInt(s[1]),d=parseInt(s[2]),p=parseInt(s[3]),f=s[4]?parseFloat(s[4]):1,v=Math.round(n+(u-n)*(1-r)),y=Math.round(h+(d-h)*(1-r)),m=Math.round(l+(p-l)*(1-r)),S=c+(f-c)*(1-r);b.ctx.fillStyle="rgba(".concat(v,", ").concat(y,", ").concat(m,", ").concat(S,")")}else{var g=Math.max(.2,r);b.ctx.fillStyle="rgba(255, 255, 255, ".concat(g,")")}}b.ctx.fillRect(i,o,b.options.squareSize,b.options.squareSize),b.ctx.shadowColor="transparent",b.ctx.shadowBlur=0});for(var e=w;e<this.canvas.width+this.options.squareSize;e+=this.options.squareSize)for(var i=O;i<this.canvas.height+this.options.squareSize;i+=this.options.squareSize){var o=Math.round(e-this.gridOffset.x%this.options.squareSize),r=Math.round(i-this.gridOffset.y%this.options.squareSize),a=Math.floor((e-w)/this.options.squareSize),s=Math.floor((i-O)/this.options.squareSize);if(this.specialBlock&&a===this.specialBlock.x&&s===this.specialBlock.y&&(this.ctx.shadowColor="rgba(255, 255, 255, 0.5)",this.ctx.shadowBlur=20,this.ctx.fillStyle=this.specialBlock.color,this.ctx.fillRect(o,r,this.options.squareSize,this.options.squareSize),this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0),this.hoveredSquare&&a===this.hoveredSquare.x&&s===this.hoveredSquare.y){this.ctx.shadowColor=this.options.hoverShadowColor,this.ctx.shadowBlur=15,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0;var n=this.options.hoverFillColor.replace("0.6",this.currentOpacity.toString());this.ctx.fillStyle=n,this.ctx.fillRect(o,r,this.options.squareSize,this.options.squareSize),this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0}this.ctx.strokeStyle=this.options.borderColor,this.ctx.strokeRect(o,r,this.options.squareSize,this.options.squareSize)}isPhone&&this.ctx.translate(-.5,-.5);var h=this.ctx.createRadialGradient(this.canvas.width/t/2,this.canvas.height/t/2,0,this.canvas.width/t/2,this.canvas.height/t/2,Math.sqrt(Math.pow(this.canvas.width/t,2)+Math.pow(this.canvas.height/t,2))/2);h.addColorStop(0,"rgba(6, 6, 6, 0)"),h.addColorStop(1,"#060606"),this.ctx.fillStyle=h,this.ctx.fillRect(0,0,this.canvas.width/t,this.canvas.height/t)}},{key:"updateAnimation",value:function(t){var e=this;this.lastTimestamp||(this.lastTimestamp=t);var i=t-this.lastTimestamp;if(this.lastTimestamp=t,this.currentOpacity!==this.targetOpacity){var o=Math.min(i/this.options.transitionDuration,1);this.currentOpacity=this.currentOpacity+(this.targetOpacity-this.currentOpacity)*o}var r,a=_createForOfIteratorHelper(this.trailSquares);try{for(a.s();!(r=a.n()).done;){var s=_slicedToArray(r.value,2),n=s[0],h=s[1];h.opacity-=i/this.options.trailDuration,h.opacity<=0&&this.trailSquares.delete(n)}}catch(t){a.e(t)}finally{a.f()}var l=window.devicePixelRatio||1,c=Math.max(isPhone?.8*this.options.speed:this.options.speed,0),u=isPhone?Math.round(100*c)/100:c;switch(this.options.direction){case"right":this.gridOffset.x=(this.gridOffset.x-u+this.options.squareSize)%this.options.squareSize;break;case"left":this.gridOffset.x=(this.gridOffset.x+u+this.options.squareSize)%this.options.squareSize;break;case"up":this.gridOffset.y=(this.gridOffset.y+u+this.options.squareSize)%this.options.squareSize;break;case"down":this.gridOffset.y=(this.gridOffset.y-u+this.options.squareSize)%this.options.squareSize;break;case"diagonal":this.gridOffset.x=(this.gridOffset.x-u+this.options.squareSize)%this.options.squareSize,this.gridOffset.y=(this.gridOffset.y-u+this.options.squareSize)%this.options.squareSize}if(this.specialBlock){var d=Math.floor(this.gridOffset.x/this.options.squareSize)*this.options.squareSize,p=Math.floor(this.gridOffset.y/this.options.squareSize)*this.options.squareSize,f=Math.round(this.specialBlock.x*this.options.squareSize+d-this.gridOffset.x%this.options.squareSize),v=Math.round(this.specialBlock.y*this.options.squareSize+p-this.gridOffset.y%this.options.squareSize);(f<-this.options.squareSize||f>this.canvas.width/l||v<-this.options.squareSize||v>this.canvas.height/l)&&this.createSpecialBlock()}this.drawGrid(),this.animationFrame=requestAnimationFrame(function(t){return e.updateAnimation(t)})}},{key:"animate",value:function(){var e=this;this.animationFrame=requestAnimationFrame(function(t){return e.updateAnimation(t)})}},{key:"handleVisibilityChange",value:function(){document[hiddenProperty]?this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null):this.animationFrame||(this.lastTimestamp=0,this.animate())}},{key:"destroy",value:function(){var e=this;this.animationFrame&&cancelAnimationFrame(this.animationFrame),window.removeEventListener("resize",function(){return e.resizeCanvas()}),this.canvas.removeEventListener("mousemove",function(t){return e.handleMouseMove(t)}),this.canvas.removeEventListener("mouseleave",function(){return e.handleMouseLeave()}),document.removeEventListener(visibilityChangeEvent,this.handleVisibilityChange.bind(this)),isPhone&&void 0!==window.orientation&&window.removeEventListener("orientationchange",function(){})}}])}();function getMoveDirection(t,e,i,o){if(isPhone){var r=i-t,a=o-e;if(Math.abs(r)<2&&Math.abs(a)<2)return DIRECTIONS.UNDIRECTED;var s,n,h=(s=r,n=a,180*Math.atan2(n,s)/Math.PI);return-135<=h&&h<=-45?DIRECTIONS.UP:45<h&&h<135?DIRECTIONS.DOWN:135<=h&&h<=180||-180<=h&&h<-135?DIRECTIONS.LEFT:-45<=h&&h<=45?DIRECTIONS.RIGHT:DIRECTIONS.UNDIRECTED}}function loadIntro(){document[hiddenProperty]||loadIntro.loaded||(setTimeout(function(){$(".wrap").classList.add("in"),setTimeout(function(){$(".content-subtitle").innerHTML="<span>".concat(_toConsumableArray(subtitle).join("</span><span>"),"</span>")},270)},0),loadIntro.loaded=!0)}function switchPage(){if(!switchPage.switched){var t={intro:$(".content-intro"),path:$(".shape-wrap path"),shape:$("svg.shape")};t.shape.style.transformOrigin="50% 0%",anime({targets:t.intro,duration:1100,easing:"easeInOutSine",translateY:"-200vh"}),anime({targets:t.shape,scaleY:[{value:[.8,1.8],duration:550,easing:"easeInQuad"},{value:1,duration:550,easing:"easeOutQuad"}]}),anime({targets:t.path,duration:1100,easing:"easeOutQuad",d:t.path.getAttribute("pathdata:id"),complete:function(t){canvas&&(cancelAnimationFrame(animationID),canvas.parentElement.removeChild(canvas),canvas=null)}}),switchPage.switched=!0}}function loadMain(){loadMain.loaded||(setTimeout(function(){$(".card-inner").classList.add("in"),setTimeout(function(){var t=document.getElementById("gridCanvas");t&&new GridAnimation(t,{direction:"diagonal",speed:isPhone?.03:.05,borderColor:isPhone?"rgba(255, 255, 255, 0.2)":"rgba(255, 255, 255, 0.1)",squareSize:isPhone?50:40,hoverFillColor:"rgba(255, 255, 255, 0.8)",hoverShadowColor:"rgba(255, 255, 255, 0.8)",transitionDuration:200,trailDuration:1500,specialBlockColor:"rgba(100, 255, 152, 0.8)",specialHoverColor:"rgba(29, 202, 29, 0.8)",snakeHeadColor:"rgba(255, 255, 255, 0.95)",snakeTailColor:"rgba(218, 231, 255, 0.25)",snakeColorDecay:.85}).init()},1100)},400),loadMain.loaded=!0)}function loadAll(){loadAll.loaded||(switchPage(),loadMain(),loadAll.loaded=!0)}window.hiddenProperty="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,window.DIRECTIONS={UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT",UNDIRECTED:"UNDIRECTED"},window.isPhone=/Mobile|Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent),window.visibilityChangeEvent=hiddenProperty.replace(/hidden/i,"visibilitychange"),window.addEventListener(visibilityChangeEvent,loadIntro),window.addEventListener("DOMContentLoaded",loadIntro);var enterEl=$(".enter");enterEl.addEventListener("click",loadAll),enterEl.addEventListener("touchenter",loadAll),document.body.addEventListener("mousewheel",loadAll,{passive:!0}),$(".arrow").addEventListener("mouseenter",loadAll),isPhone&&(document.addEventListener("touchstart",function(t){window.startx=t.touches[0].pageX,window.starty=t.touches[0].pageY},{passive:!0}),document.addEventListener("touchend",function(t){var e,i;e=t.changedTouches[0].pageX,i=t.changedTouches[0].pageY,getMoveDirection(startx,starty,e,i)===DIRECTIONS.UP&&loadAll()},{passive:!0}));